<!DOCTYPE html>
<html xmlns:v-bind="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>黑马旅游网</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" type="text/css" href="css/route-detail.css">
    <link rel="stylesheet" type="text/css" href="css/ranking-list.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <!--我的收藏页css-->
    <style>
        .tab-content .row > div {
            margin-top: 16px;
        }

        .tab-content {
            margin-bottom: 36px;
        }
    </style>
    <script src="js/jquery-3.3.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
</head>
<body>
<div id="app">
    <!--引入头部-->
    <myheader></myheader>
    <!--显示路由的组件-->
    <router-view></router-view>
    <!--导入底部-->
    <myfooter></myfooter>
</div>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript" src="js/vue-router.js"></script>
<script type="text/javascript" src="js/axios.min.js"></script>
<!--页头组件-->
<template id="myheader">
    <header id="header">
        <div class="top_banner">
            <img src="images/top_banner.jpg" alt="">
        </div>
        <div class="shortcut">
            <!-- 未登录状态  -->
            <div class="login_out" v-if="JSON.stringify(user) == '{}'">
                <a href="#/login">登录</a>
                <a href="#/register">注册</a>
            </div>
            <!-- 登录状态  -->
            <div class="login" v-else>
                <span id="span_username">欢迎回来，{{user.username}}</span>
                <a href="#/myfavorite" class="collection">我的收藏</a>
                <a href="javascript:" @click="exit">退出</a>
            </div>
        </div>
        <div class="header_wrap">
            <div class="topbar">
                <div class="logo">
                    <a href="/"><img src="images/logo.jpg" alt=""></a>
                </div>
                <div class="search">
                    <input name="" type="text" id="search_input" placeholder="请输入路线名称" class="search_input"
                           autocomplete="off" v-model="rname">
                    <a href="javascript:" id="search-button" class="search-button" @click="search">搜索</a>
                </div>
                <div class="hottel">
                    <div class="hot_pic">
                        <img src="images/hot_tel.jpg" alt="">
                    </div>
                    <div class="hot_tel">
                        <p class="hot_time">客服热线(9:00-6:00)</p>
                        <p class="hot_num">400-618-9090</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="navitem">
            <ul class="nav">
                <li class="nav-active"><a href="#/index">首页</a></li>
                <li v-for="category in categories">
                    <router-link :to="{ name: 'route_list', params: {cid: category.cid}}">{{category.cname}}
                    </router-link>
                    <!--                    <a :href="'#/route_list/'+category.cid+'/'+">{{category.cname}}</a>-->
                </li>
                <li><a href="#/favorite_rank">收藏排行榜</a></li>
            </ul>
        </div>
    </header>
</template>
<!--页尾组件-->
<template id="myfooter">
    <footer id="footer">
        <div class="why_select">
            <dl>
                <dt class="fl">
                    <img src="images/icon_1.jpg" alt="">
                </dt>
                <dd>
                    <h1>产品齐全</h1>
                    <h2>产品全自主选，随心买</h2>
                </dd>
            </dl>
            <dl>
                <dt class="fl">
                    <img src="images/icon_2.jpg" alt="">
                </dt>
                <dd>
                    <h1>便利快捷</h1>
                    <h2>24小时不打烊，随时买</h2>
                </dd>
            </dl>
            <dl>
                <dt class="fl">
                    <img src="images/icon_3.jpg" alt="">
                </dt>
                <dd>
                    <h1>安全支付</h1>
                    <h2>知名支付工具，放心买</h2>
                </dd>
            </dl>
            <dl>
                <dt class="fl">
                    <img src="images/icon_4.jpg" alt="">
                </dt>
                <dd style="margin-right:0px;">
                    <h1>贴心服务</h1>
                    <h2>客服全年无休，安心买</h2>
                </dd>
            </dl>
        </div>
        <div class="company">
            <p>江苏传智播客教育科技股份有限公司 版权所有Copyright 2006-2018, All Rights Reserved 苏ICP备16007882</p>
        </div>
    </footer>
</template>
<!--分页组件-->
<template id="pagination">
    <div class="pageNum">
        <ul>
            <li class="threeword" @click="current=1"><a href="javascript:">首页</a></li>
            <li class="threeword" @click="current--"><a href="javascript:">上一页</a></li>
            <li :class="item==current?'curPage':''" v-for="item in end" @click="current=item" v-if="item>=begin">
                <a href="javascript:">{{item}}</a>
            </li>
            <li class="threeword" @click="current++"><a href="javascript:">下一页</a></li>
            <li class="threeword" @click="current=count"><a href="javascript:">末页</a></li>
        </ul>
    </div>
</template>
<!-- 首页-->
<template id="index">
    <div>
        <!-- 首页导航 -->
        <!-- banner start-->
        <section id="banner">
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="2000">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>
                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <img src="images/banner_1.jpg" alt="">
                    </div>
                    <div class="item">
                        <img src="images/banner_2.jpg" alt="">
                    </div>
                    <div class="item">
                        <img src="images/banner_3.jpg" alt="">
                    </div>
                </div>
                <!-- Controls -->
                <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </section>
        <!-- banner end-->
        <!-- 旅游 start-->
        <section id="content">
            <!-- 黑马精选start-->
            <section class="hemai_jx">
                <div class="jx_top">
                    <div class="jx_tit">
                        <img src="images/icon_5.jpg" alt="">
                        <span>黑马精选</span>
                    </div>
                    <!-- Nav tabs -->
                    <ul class="jx_tabs" role="tablist">
                        <li role="presentation" class="active">
                            <span></span>
                            <a href="#popularity" aria-controls="popularity" role="tab" data-toggle="tab">人气旅游</a>
                        </li>
                        <li role="presentation">
                            <span></span>
                            <a href="#newest" aria-controls="newest" role="tab" data-toggle="tab">最新旅游</a>
                        </li>
                        <li role="presentation">
                            <span></span>
                            <a href="#theme" aria-controls="theme" role="tab" data-toggle="tab">主题旅游</a>
                        </li>
                    </ul>
                </div>
                <div class="jx_content">
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="popularity">
                            <div class="row">
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_4.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_4.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_4.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_4.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="newest">
                            <div class="row">
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_1.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_1.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_1.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_1.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="theme">
                            <div class="row">
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_2.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_2.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_2.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="javascript:;">
                                        <img src="images/jiangxuan_2.jpg" alt="">
                                        <div class="has_border">
                                            <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                            <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 黑马精选end-->
            <!-- 国内游 start-->
            <section class="hemai_jx">
                <div class="jx_top">
                    <div class="jx_tit">
                        <img src="images/icon_6.jpg" alt="">
                        <span>国内游</span>
                    </div>
                </div>
                <div class="heima_gn">
                    <div class="guonei_l">
                        <img src="images/guonei_1.jpg" alt="">
                    </div>
                    <div class="guone_r">
                        <div class="row">
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 国内游 end-->
            <!-- 境外游 start-->
            <section class="hemai_jx">
                <div class="jx_top">
                    <div class="jx_tit">
                        <img src="images/icon_7.jpg" alt="">
                        <span>境外游</span>
                    </div>
                </div>
                <div class="heima_gn">
                    <div class="guonei_l">
                        <img src="images/jiangwai_1.jpg" alt="">
                    </div>
                    <div class="guone_r">
                        <div class="row">
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="route_detail.html">
                                    <img src="images/jiangxuan_4.jpg" alt="">
                                    <div class="has_border">
                                        <h3>上海直飞三亚5天4晚自由行(春节预售+亲子/蜜月/休闲游首选+豪华酒店任选+接送机)</h3>
                                        <div class="price">网付价<em>￥</em><strong>889</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 境外游 end-->
        </section>
        <!-- 旅游 end-->
    </div>
</template>
<!--登录页-->
<template id="login">
    <section id="login_wrap">
        <div class="fullscreen-bg" style="background: url(images/login_bg.png);height: 532px;">

        </div>
        <div class="login-box">
            <div class="title">
                <img src="images/login_logo.png" alt="">
                <span>欢迎登录黑马旅游账户</span>
            </div>
            <div class="login_inner">

                <!--登录错误提示消息-->
                <div class="alert alert-danger" v-if="errmsg">{{errmsg}}</div>
                <form id="loginForm" action="" method="post" accept-charset="utf-8">
                    <input type="hidden" name="action" value="login"/>
                    <input type="text" placeholder="请输入账号" autocomplete="off" v-model="username">
                    <input type="text" placeholder="请输入密码" autocomplete="off" v-model="password">
                    <div class="verify">
                        <input type="text" placeholder="请输入验证码" autocomplete="off" v-model="code">
                        <span><img :src="src" @click="changeCheckCode"></span>
                    </div>
                    <div class="submit_btn">
                        <button type="button" @click="login">登录</button>
                        <div class="auto_login">
                            <input type="checkbox" name="" class="checkbox">
                            <span>自动登录</span>
                        </div>
                    </div>
                </form>
                <div class="reg">没有账户？<a href="#/register">立即注册</a></div>
            </div>
        </div>
    </section>
</template>
<!--注册页-->
<template id="register">
    <div class="rg_layout">
        <div class="rg_form clearfix">
            <div class="rg_form_left">
                <p>新用户注册</p>
                <p>USER REGISTER</p>
            </div>
            <div class="rg_form_center">

                <!--注册表单-->
                <div id="errorMsg" style="color: red; text-align: center"></div>
                <form id="registerForm">
                    <table style="margin-top: 25px;">
                        <tr>
                            <td class="td_left">
                                <label for="username">用户名</label>
                            </td>
                            <td class="td_right">
                                <input :style="username_css" @blur="checkUsername" type="text" id="username"
                                       v-model="user.username" placeholder="请输入账号">
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="password">密码</label>
                            </td>
                            <td class="td_right">
                                <input :style="password_css" @blur="checkPassword" type="text" id="password"
                                       v-model="user.password" placeholder="请输入密码">
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="email">Email</label>
                            </td>
                            <td class="td_right">
                                <input :style="email_css" @blur="checkEmail" type="text" id="email" v-model="user.email"
                                       placeholder="请输入Email">
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="name">姓名</label>
                            </td>
                            <td class="td_right">
                                <input type="text" id="name" v-model="user.name" placeholder="请输入真实姓名">
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="telephone">手机号</label>
                            </td>
                            <td class="td_right">
                                <input type="text" id="telephone" v-model="user.telephone" placeholder="请输入您的手机号">
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="sex">性别</label>
                            </td>
                            <td class="td_right gender">
                                <input type="radio" id="sex" v-model="user.sex" value="男" checked> 男
                                <input type="radio" v-model="user.sex" value="女"> 女
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="birthday">出生日期</label>
                            </td>
                            <td class="td_right">
                                <input type="date" id="birthday" v-model="user.birthday" placeholder="年/月/日">
                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                                <label for="check">验证码</label>
                            </td>
                            <td class="td_right check">
                                <input type="text" id="check" v-model="user.code" class="check">
                                <img :src="src" height="32px" @click="changeCheckCode">

                            </td>
                        </tr>
                        <tr>
                            <td class="td_left">
                            </td>
                            <td class="td_right check">
                                <input type="button" @click="register" class="submit" value="注册">
                                <span id="msg" style="color: red;"></span>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="rg_form_right">
                <p>
                    已有账号？
                    <a href="#/login">立即登录</a>
                </p>
            </div>
        </div>
    </div>
</template>
<!--注册成功页-->
<template id="register_ok">
    <div style="text-align:center;color:yellow;font-weight:bold;height:316px;padding-top:128px;font-size:30px;">
        <h4>恭喜，注册成功！请登录您的注册邮箱进行激活您的账号，激活后才能登录。</h4>
    </div>
</template>
<!--列表页-->
<template id="route_list">
    <div class="page_one">
        <div class="contant">
            <div class="crumbs">
                <img src="images/search.png" alt="">
                <p>黑马旅行><span>搜索结果</span></p>
            </div>
            <div class="xinxi clearfix">
                <div class="left">
                    <div class="header">
                        <span>商品信息</span>
                        <span class="jg">价格</span>
                    </div>
                    <ul id="route">
                        <li v-for="route in pageResult.list">
                            <div class="img"><img :src="route.rimage" width="299px" alt=""></div>
                            <div class="text1">
                                <p>{{route.rname}}</p>
                                <br/>
                                <p>{{route.routeintroduce}}</p>
                            </div>
                            <div class="price">
                                <p class="price_num">
                                    <span>&yen;</span>
                                    <span>{{route.price}}</span>
                                    <span>起</span>
                                </p>
                                <p><a :href="'#/route_detail/'+route.rid">查看详情</a></p>
                            </div>
                        </li>
                    </ul>
                    <div class="page_num_inf">
                        <i></i> 共
                        <span id="totalPage">{{pageResult.totalPage}}</span>页<span id="totalCount">{{pageResult.totalCount}}</span>条
                    </div>
                    <pagination v-model="current" v-bind:count="total"></pagination>
                </div>
                <div class="right">
                    <div class="top">
                        <div class="hot">HOT</div>
                        <span>热门推荐</span>
                    </div>
                    <ul>
                        <li>
                            <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                            <div class="right">
                                <p>清远新银盏温泉度假村酒店/自由行套...</p>
                                <p>网付价<span>&yen;<span>899</span>起</span>
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                            <div class="right">
                                <p>清远新银盏温泉度假村酒店/自由行套...</p>
                                <p>网付价<span>&yen;<span>899</span>起</span>
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                            <div class="right">
                                <p>清远新银盏温泉度假村酒店/自由行套...</p>
                                <p>网付价<span>&yen;<span>899</span>起</span>
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                            <div class="right">
                                <p>清远新银盏温泉度假村酒店/自由行套...</p>
                                <p>网付价<span>&yen;<span>899</span>起</span>
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                            <div class="right">
                                <p>清远新银盏温泉度假村酒店/自由行套...</p>
                                <p>网付价<span>&yen;<span>899</span>起</span>
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</template>
<!--列表详情页-->
<template id="route_detail">
    <div class="wrap" v-if="JSON.stringify(route) != '{}'">
        <div class="bread_box">
            <a href="/">首页</a>
            <span> &gt;</span>
            <a href="#">国内游</a><span> &gt;</span>
            <a href="#">{{route.rname}}</a>
        </div>
        <div class="prosum_box">
            <dl class="prosum_left">
                <dt>
                    <img alt="" class="big_img" :src="route.routeimglist[0].bigPic">
                </dt>
                <dd>
                    <a class="up_img up_img_disable"></a>
                    <a title="" v-for="(img,index) in route.routeimglist" class="little_img"
                       :data-bigpic="img.bigPic" :style="index>=4?'display: none':''">
                        <img :src="img.smallPic">
                    </a>
                    <a class="down_img down_img_disable" style="margin-bottom: 0;"></a>
                </dd>
            </dl>
            <div class="prosum_right">
                <p class="pros_title">{{route.rname}}</p>
                <p class="hot">{{route.routeIntroduce}}</p>
                <div class="pros_other">
                    <p>经营商家 ：{{route.seller.sname}}</p>
                    <p>咨询电话 : {{route.seller.consphone}}</p>
                    <p>地址 ： {{route.seller.address}}</p>
                </div>
                <div class="pros_price">
                    <p class="price"><strong>¥{{route.price}}</strong><span>起</span></p>
                    <p class="collect">
                        <a class="btn" :class="{already:isfav}" :disabled="isfav" @click="!isfav && addFavorite()">
                            <i class="glyphicon glyphicon-heart-empty"></i>点击收藏</a>
                        <span>已收藏{{route.count}}次</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="you_need_konw">
            <span>旅游须知</span>
            <div class="notice">
                <p>1、旅行社已投保旅行社责任险。建议游客购买旅游意外保险 <br>

                <p>
                    2、旅游者参加打猎、潜水、海边游泳、漂流、滑水、滑雪、滑草、蹦极、跳伞、滑翔、乘热气球、骑马、赛车、攀岩、水疗、水上飞机等属于高风险性游乐项目的，敬请旅游者务必在参加前充分了解项目的安全须知并确保身体状况能适应此类活动；如旅游者不具备较好的身体条件及技能，可能会造成身体伤害。</p>

                <p>
                    3、参加出海活动时，请务必穿着救生设备。参加水上活动应注意自己的身体状况，有心脏病、冠心病、高血压、感冒、发烧和饮酒及餐后不可以参加水上活动及潜水。在海里活动时，严禁触摸海洋中各种鱼类，水母，海胆，珊瑚等海洋生物，避免被其蛰伤。老人和小孩必须有成年人陪同才能参加合适的水上活动。在海边游玩时，注意保管好随身携带的贵重物品。</p>

                <p>4、根据中国海关总署的规定，旅客在境外购买的物品，在进入中国海关时可能需要征收关税。详细内容见《中华人民共和国海关总署公告2010年第54号文件》。</p>

                <p>5、建议出发时行李托运，贵重物品、常用物品、常用药品、御寒衣物等请随身携带，尽量不要托运。行李延误属于不可抗力因素，我司将全力协助客人跟进后续工作，但我司对此不承担任何责任。</p>
                <p>1、旅行社已投保旅行社责任险。建议游客购买旅游意外保险 <br>

                <p>
                    2、旅游者参加打猎、潜水、海边游泳、漂流、滑水、滑雪、滑草、蹦极、跳伞、滑翔、乘热气球、骑马、赛车、攀岩、水疗、水上飞机等属于高风险性游乐项目的，敬请旅游者务必在参加前充分了解项目的安全须知并确保身体状况能适应此类活动；如旅游者不具备较好的身体条件及技能，可能会造成身体伤害。</p>

                <p>
                    3、参加出海活动时，请务必穿着救生设备。参加水上活动应注意自己的身体状况，有心脏病、冠心病、高血压、感冒、发烧和饮酒及餐后不可以参加水上活动及潜水。在海里活动时，严禁触摸海洋中各种鱼类，水母，海胆，珊瑚等海洋生物，避免被其蛰伤。老人和小孩必须有成年人陪同才能参加合适的水上活动。在海边游玩时，注意保管好随身携带的贵重物品。</p>

                <p>4、根据中国海关总署的规定，旅客在境外购买的物品，在进入中国海关时可能需要征收关税。详细内容见《中华人民共和国海关总署公告2010年第54号文件》。</p>

                <p>5、建议出发时行李托运，贵重物品、常用物品、常用药品、御寒衣物等请随身携带，尽量不要托运。行李延误属于不可抗力因素，我司将全力协助客人跟进后续工作，但我司对此不承担任何责任。</p>
            </div>
        </div>
    </div>
</template>
<!--收藏排行榜-->
<template id="favorite_rank">
    <div class="contant">
        <div class="shaixuan">
            <span>线路名称</span>
            <input type="text" v-model="route_name">
            <span>金额</span>
            <input type="text" v-model="startMoney">~<input type="text" v-model="endMoney">
            <button @click="search">搜索</button>
        </div>
        <div class="list clearfix">
            <ul>
                <li v-for="route in routes">
                    <span class="num one">{{route.rid}}</span>
                    <a :href="'#/route_detail/'+route.rid"><img :src="route.rimage" alt=""></a>
                    <h4><a :href="'#/route_detail/'+route.rid">{{route.rname}}</a></h4>
                    <p>
                        <b class="price">&yen;<span>{{route.price}}</span>起</b>
                        <span class="shouchang">已收藏{{route.count}}次</span>
                    </p>
                </li>
            </ul>
        </div>
        <pagination v-model="current" v-bind:count="total"></pagination>
    </div>
</template>
<!--我的收藏-->
<template id="myfavorite">
    <div class="contant">
        <section class="hemai_jx">
            <div class="jx_top">
                <div class="jx_tit">
                    <img src="images/icon_5.jpg" alt="">
                    <span>我的收藏</span>
                </div>
            </div>
            <div class="jx_content">
                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="home">
                        <div class="row">
                            <div class="col-md-3" v-for="route in pageResult.list">
                                <a :href="'#/route_detail/'+route.rid">
                                    <img :src="route.rimage" alt="">
                                    <div class="has_border">
                                        <h3>{{route.rname}}</h3>
                                        <div class="price">网付价<em>￥</em><strong>{{route.price}}</strong><em>起</em></div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <pagination v-model="current" v-bind:count="total"></pagination>
        </section>
    </div>
</template>
<template id="notFound">
    <div class="container">
        <h1>对不起，您访问的资源不存在！</h1>
        <a href="#/index">返回首页</a>
    </div>
</template>
<script type="text/javascript">
    axios.defaults.baseURL = 'http://localhost:8080';
    var myheader = {
        template: '#myheader',
        data: function () {
            return {
                user: {},
                rname: "",
                categories: []
            }
        },
        methods: {
            category: function () {
                var _this = this;
                axios.get("/category/findAll").then(res => {
                    console.log(res.data);
                    if (res.data.status) {
                        _this.categories = res.data.data;
                    }
                });
            },
            findUser: function () {
                var _this = this;
                axios.get("/user/findOne").then(res => {
                    console.log(res.data);
                    if (res.data.status) {
                        _this.user = res.data.data;
                    }
                });
            },
            exit: function () {
                console.log("点击退出");
                axios.get("/user/exit").then(res => {
                    console.log(res.data);
                    location.href = "#/index";
                    location.reload();
                });
            },
            search: function () {
                this.$router.push('/route_list/' + this.$route.params.cid + '?rname=' + this.rname)
            }
        },
        created() {
            this.category();
            this.findUser();
        },
        watch: {
            // url发生变化就清除 搜索的文本框
            $route(to, from) {
                // console.log(to);
                this.rname = to.query.rname;
            }
        },
    };
    var myfooter = {template: '#myfooter'};
    var pagination = {
        props: ["value", "count"],
        template: '#pagination',
        data: function () {
            return {
                current: this.value,
                begin: 0,
                end: 0,
            }
        },
        watch: {
            current(val) {
                this.page();
                if (val > this.count) {
                    val = this.count;
                }
                if (val < 1) {
                    val = 1;
                }
                this.current = val;
                console.log("val:" + val);
                this.$emit("input", val);
            },
            count(val) {
                this.page();
            },
        },
        methods: {
            page: function () {
                if (this.count < 10) {
                    this.begin = 1;
                    this.end = this.count;
                } else {
                    this.begin = this.current - 5;
                    this.end = this.current + 4;

                    // 前面不够5页补齐5页
                    if (this.begin < 1) {
                        this.begin = 1;
                        this.end = this.begin + 9;
                    }
                    // 后面不够4页补齐4页
                    if (this.end > this.count) {
                        this.end = this.count;
                        this.begin = this.end - 9;
                    }
                }
                console.log("begin:" + this.begin + ",end:" + this.end);
            }
        }
    };
    // 全局组件注册,页头，页尾
    Vue.component("myheader", myheader);
    Vue.component("myfooter", myfooter);
    Vue.component("pagination", pagination);
    // 首页
    var index = {template: '#index'};
    // 登录页
    var login = {
        template: '#login',
        data: function () {
            return {
                username: "",
                password: "",
                code: "",
                errmsg: "",
                src: "checkCode"
            }
        },
        methods: {
            // 以普通表单形式提交数据
            login: function () {
                var _this = this;
                const params = new URLSearchParams();
                params.append('username', this.username);
                params.append('password', this.password);
                params.append('code', this.code);
                axios.post('/user/login', params).then(res => {
                    console.log(res.data);
                    if (res.data.status) {
                        location.href = "#/index";
                        location.reload();
                    } else {
                        _this.errmsg = res.data.msg;
                    }
                });
                // axios({
                //     method: 'post',
                //     url: '/user/login',
                //     headers: {
                //         'Content-Type': 'application/x-www-form-urlencoded'
                //     },
                //     transformRequest: [function (data) {
                //         let ret = '';
                //         for (let it in data) {
                //             ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'
                //         }
                //         return ret
                //     }],
                //     data: {
                //         username: _this.username,
                //         password: _this.password,
                //         code: _this.code,
                //     },
                // }).then(res => {
                //     console.log(res.data);
                //     if (res.data.status) {
                //         location.href = "#/index";
                //         location.reload();
                //     } else {
                //         _this.errmsg = res.data.msg;
                //     }
                // });
            },
            changeCheckCode: function () {
                this.src = this.src + "?time=" + new Date().getTime()
            }
        },
    };
    // 注册页
    var register = {
        template: '#register',
        data: function () {
            return {
                user: {},
                src: "checkCode",
                username_css: "",
                password_css: "",
                email_css: "",
            }
        },
        methods: {
            changeCheckCode: function () {
                this.src = this.src + "?time=" + new Date().getTime()
            },
            checkUsername: function () {
                var reg_username = /^\w{8,20}$/;
                var flag = reg_username.test(this.user.username);
                if (flag) {
                    this.username_css = "";
                } else {
                    this.username_css = "border:1px solid red";
                }
                return flag;
            },
            checkPassword: function () {
                var reg_password = /^\w{8,20}$/;
                var flag = reg_password.test(this.user.password);
                if (flag) {
                    this.password_css = "";
                } else {
                    this.password_css = "border:1px solid red";
                }
                return flag;
            },
            checkEmail: function () {
                var reg_email = /^\w+@\w+\.\w+$/;
                var flag = reg_email.test(this.user.email);
                if (flag) {
                    this.email_css = "";
                } else {
                    this.email_css = "border:1px solid red";
                }
                return flag;
            },
            register: function () {
                if (this.checkUsername() && this.checkPassword() && this.checkEmail()) {
                    var _this = this;
                    axios({
                        method: 'post',
                        url: '/user/regist',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'
                        },
                        transformRequest: [function (data) {
                            let ret = '';
                            for (let it in data) {
                                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'
                            }
                            return ret
                        }],
                        data: _this.user,
                    }).then(res => {
                        console.log(res.data);
                        if (res.data.status) {
                            location.href = "#/register_ok";
                        } else {
                            alert(res.data.msg);
                        }
                    });
                }

            }
        }
    };
    // 注册成功页
    var register_ok = {template: '#register_ok'};
    // 路线列表页
    var route_list = {
        props: ['cid'],
        template: '#route_list',
        data: function () {
            return {
                pageResult: {},
                current: 1,
                total: 0,
                rname: "",
            }
        },
        methods: {
            pageQuery: function () {
                var _this = this;
                axios.get("/route/pageQuery", {
                    params: {
                        cid: this.cid,
                        currentPage: this.current,
                        rname: this.rname,
                    }
                }).then(res => {
                    console.log(res.data);
                    _this.pageResult = res.data.data;
                    _this.total = _this.pageResult.totalPage;
                });
            },
        },
        beforeRouteUpdate(to, from, next) {
            // url变化是获取rname的值
            this.rname = to.query.rname;
            next();
        },
        created() {
            this.pageQuery();
        },
        watch: {
            current: function (val) {
                this.pageQuery();
            },
            cid: function (val) {
                this.pageQuery();
            },
            rname: function (val) {
                this.pageQuery();
            }
        },
    };
    // 路线详情页
    var route_detail = {
        props: ['rid'],
        template: '#route_detail',
        data: function () {
            return {
                route: {},
                isfav: false,
            }
        },
        methods: {
            findOne: function () {
                var _this = this;
                axios.get("/route/findOne", {params: {rid: this.rid}}).then(res => {
                    console.log(res.data);
                    _this.route = res.data.data;
                    _this.isFavorite();

                });
            },
            isFavorite: function () {
                var _this = this;
                axios.get("route/isFavorite", {params: {rid: this.rid}}).then(res => {
                    console.log(res.data);
                    if (res.data.status) {
                        console.log("用户已收藏！！")
                        _this.isfav = true;
                    }
                    _this.action();
                });
            },
            addFavorite: function () {
                var _this = this;
                axios.get("route/addFavorite", {params: {rid: this.rid}}).then(res => {
                    console.log(res.data);
                    if (res.data.status) {
                        console.log("收藏成功！！");
                        alert(res.data.msg);
                        _this.isfav = true;
                        _this.route.count++;
                    } else {
                        alert(res.data.msg);
                        _this.$router.push("/login");
                    }
                    // _this.action();
                });
            },
            action: function () {
                // console.log("action!!!");
                var _this = this;
                $(document).ready(function () {
                    $(function () {
                        //jq事件
                        //焦点图效果
                        //点击图片切换图片
                        $('.little_img').on('mousemove', function () {
                            console.log("鼠标来了");
                            $('.little_img').removeClass('cur_img');
                            var big_pic = $(this).data('bigpic');
                            $('.big_img').attr('src', big_pic);
                            $(this).addClass('cur_img');
                        });
                        //上下切换
                        var picindex = 0;
                        var nextindex = 4;
                        $('.down_img').on('click', function () {
                            console.log("鼠标点击");
                            var num = $('.little_img').length;
                            if ((nextindex + 1) <= num) {
                                $('.little_img:eq(' + picindex + ')').hide();
                                $('.little_img:eq(' + nextindex + ')').show();
                                picindex = picindex + 1;
                                nextindex = nextindex + 1;
                            }
                        });
                        $('.up_img').on('click', function () {
                            console.log("鼠标点击");
                            var num = $('.little_img').length;
                            if (picindex > 0) {
                                $('.little_img:eq(' + (nextindex - 1) + ')').hide();
                                $('.little_img:eq(' + (picindex - 1) + ')').show();
                                picindex = picindex - 1;
                                nextindex = nextindex - 1;
                            }
                        });
                        //自动播放
                        var timer = setInterval(_this.auto_play, 5000);

                    });

                });
            },
            auto_play: function () {
                console.log("换图片啦");
                var cur_index = $('.prosum_left dd').find('a.cur_img').index();
                cur_index = cur_index - 1;
                var num = $('.little_img').length;
                var max_index = 3;
                if ((num - 1) < 3) {
                    max_index = num - 1;
                }
                if (cur_index < max_index) {
                    var next_index = cur_index + 1;
                    var big_pic = $('.little_img:eq(' + next_index + ')').data('bigpic');
                    $('.little_img').removeClass('cur_img');
                    $('.little_img:eq(' + next_index + ')').addClass('cur_img');
                    $('.big_img').attr('src', big_pic);
                } else {
                    var big_pic = $('.little_img:eq(0)').data('bigpic');
                    $('.little_img').removeClass('cur_img');
                    $('.little_img:eq(0)').addClass('cur_img');
                    $('.big_img').attr('src', big_pic);
                }
            },
        },
        created() {
            this.findOne();
            this.isFavorite();
        }
    };
    // 收藏排行榜
    var favorite_rank = {
        template: '#favorite_rank',
        data: function () {
            return {
                pageResult: {},
                routes: [],
                route_name: "",
                startMoney: 0,
                endMoney: 0,
                current: 1,
                total: 0,
            }
        },
        methods: {
            pageQuery: function () {
                var _this = this;
                axios.get("/favorite/page", {
                    params: {
                        rname: this.route_name,
                        start: this.startMoney,
                        end: this.endMoney,
                        current: this.current
                    }
                }).then(res => {
                    // console.log(res.data);
                    _this.pageResult = res.data.data;
                    _this.routes = _this.pageResult.list;
                    _this.total = _this.pageResult.totalPage;
                });
            },
            search: function () {
                this.pageQuery();
            },
        },
        created() {
            this.pageQuery();
        },
        watch: {
            current: function (val) {
                this.pageQuery();
            }
        }
    };
    // 我的收藏
    var myfavorite = {
        template: '#myfavorite',
        data: function () {
            return {
                pageResult: {},
                current: 1,
                total: 0
            }
        },
        watch: {
            current: function (val) {
                this.pageQuery();
            }
        },
        methods: {
            pageQuery: function () {
                var _this = this;
                axios.get("/favorite/myfav", {
                    params: {
                        current: this.current
                    }
                }).then(res => {
                    console.log(res.data);
                    _this.pageResult = res.data.data;
                    _this.total = _this.pageResult.totalPage;
                });
            },
        }, created() {
            this.pageQuery();
        }
    };
    var notFound = {
        template: '#notFound'
    };
    //创建路由对象
    const router = new VueRouter({
        routes: [
            {path: '/', redirect: '/index'},
            {path: '/index', component: index},
            {path: '/login', component: login},
            {path: '/register', component: register},
            {path: '/register_ok', component: register_ok},
            {path: '/route_list/:cid', name: 'route_list', component: route_list, props: true},
            {path: '/route_detail/:rid', name: 'route_detail', component: route_detail, props: true},
            {path: '/favorite_rank', component: favorite_rank},
            {path: '/myfavorite', component: myfavorite},
            {path: '/*', component: notFound},
        ]
    });
    var app = new Vue({
        el: "#app",
        router: router   //设置路由对象
    });

</script>
</body>
</html>